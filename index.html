<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel ="stylesheet"
          href= "https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css"
          />
    <title>Singapore News</title>
  </head>
  <body>
    <form class="search" action="">
      <label for="News"></label>
      <input class="input" type="text" />
      <input type="submit" />
    
    </form>
    
    <div class="container">
      <u1 class="news=list"></u1>
      </div>
    
    <script>
      const searchFrom = document.querySelector('.search');
      const input = document.querySelector('.input');
      const newsList = document.querySelector('.news-list');
      
      searchFrom.addEventListener('submit', retrieve)
      function retrieve(e){
        newsList.innerHTML = ''
        
        e.preventDefault()
        const apiKey = '2358a271cd264c639fc86f2c6967aaf5'
        let topic = input.value;
        let url = `http://newsapi.org/v2/everything?q=${topic}&apiKey=${apiKey}`
        fetch(url).then((res)=>(
          return res.json()
        }).then((data)=>{
          console.log(data)
          data.articles.forEach(article =>{
            let li = document.createElement('li');
            let a = document.createElement('a');
            a.setAttribute('href',article.url );
            a.setAttribute('target', 'blank')
            a.textContent = article.title;
            li.appendChild(a);
            newsList.appendChild(li);
          })                                
        })
        
        console.log(topic)
      }
  </body>
</html>
